# 校园失物招领系统 - 前端开发计划

## 项目概述

本项目是一个校园失物招领系统的前端应用，支持三种用户角色：普通用户、失物管理员、总管理员。系统采用 Vue 3 + Pinia + Vue Router + Axios 技术栈，遵循高内聚低耦合的设计原则。

## 架构设计

### 目录结构

```
src/
├── api/                 # API接口层
│   ├── index.js         # HTTP客户端配置
│   ├── user.js          # 普通用户相关接口
│   ├── admin.js         # 管理员相关接口
│   └── lostItem.js      # 失物相关接口
├── stores/              # Pinia状态管理
│   ├── auth.js          # 认证状态管理
│   ├── user.js          # 用户信息状态管理
│   └── lostItem.js      # 失物数据状态管理
├── components/          # 可复用组件
│   ├── common/          # 通用组件
│   ├── forms/           # 表单组件
│   └── cards/           # 卡片组件
├── views/               # 页面组件
│   ├── auth/            # 认证相关页面
│   ├── user/            # 普通用户页面
│   ├── admin/           # 管理员页面
│   └── common/          # 通用页面
├── router/              # 路由配置
│   └── index.js
├── utils/               # 工具函数
│   ├── request.js       # 请求工具
│   ├── auth.js          # 认证工具
│   └── format.js        # 格式化工具
├── constants/           # 常量定义
│   ├── enums.js         # 枚举值
│   └── api.js           # API常量
└── styles/              # 样式文件
    ├── global.css       # 全局样式
    └── variables.css    # CSS变量
```

### 设计原则

1. **API层独立性**：所有后端接口调用集中在 `api/` 目录，当后端接口变更时只需修改对应文件
2. **状态管理模块化**：按业务领域划分 Pinia store，避免状态耦合
3. **组件可复用性**：组件设计遵循单一职责原则，通过 props 和 events 通信
4. **路由权限控制**：基于用户角色的路由守卫和页面权限控制

## 开发计划

### 阶段一：基础架构搭建

#### 任务 1：搭建API层基础结构
- **文件**：`src/api/index.js`
- **内容**：配置 Axios 实例，设置请求/响应拦截器
- **功能**：统一错误处理、token 自动添加、响应数据格式化

#### 任务 2：定义系统常量
- **文件**：`src/constants/enums.js`, `src/constants/api.js`
- **内容**：物品类型、颜色、用户角色等枚举值定义
- **功能**：提供系统中使用的所有常量，便于维护

#### 任务 3：创建工具函数
- **文件**：`src/utils/request.js`, `src/utils/auth.js`, `src/utils/format.js`
- **内容**：请求工具、认证工具、数据格式化工具
- **功能**：提供通用的工具函数

### 阶段二：认证系统实现

#### 任务 4：实现用户认证API
- **文件**：`src/api/user.js`, `src/api/admin.js`
- **内容**：三种角色的登录接口、用户信息获取接口
- **功能**：处理用户登录、获取用户信息

#### 任务 5：实现认证状态管理
- **文件**：`src/stores/auth.js`
- **内容**：用户登录状态、token 管理、角色权限
- **功能**：全局认证状态管理

#### 任务 6：实现登录页面
- **文件**：`src/views/auth/LoginView.vue`
- **内容**：支持三种角色的登录表单
- **功能**：用户登录界面

### 阶段三：失物功能实现

#### 任务 7：实现失物相关API
- **文件**：`src/api/lostItem.js`
- **内容**：失物发布、搜索、领取、删除等接口
- **功能**：处理所有失物相关的后端交互

#### 任务 8：实现失物状态管理
- **文件**：`src/stores/lostItem.js`
- **内容**：失物列表、搜索条件、分页信息
- **功能**：失物数据的全局状态管理

#### 任务 9：创建基础UI组件
- **文件**：
  - `src/components/common/BaseButton.vue`
  - `src/components/common/BaseInput.vue`
  - `src/components/cards/LostItemCard.vue`
  - `src/components/forms/SearchForm.vue`
- **内容**：可复用的UI组件
- **功能**：提供统一的UI组件库

#### 任务 10：实现失物浏览页面
- **文件**：`src/views/common/LostItemListView.vue`
- **内容**：失物列表展示、分页、搜索
- **功能**：失物浏览和搜索界面

### 阶段四：用户功能完善

#### 任务 11：实现用户信息管理
- **文件**：
  - `src/stores/user.js`
  - `src/views/user/ProfileView.vue`
- **内容**：用户信息状态管理和个人信息页面
- **功能**：用户个人信息管理

#### 任务 12：实现管理员功能页面
- **文件**：
  - `src/views/admin/PublishItemView.vue`
  - `src/views/admin/MyItemsView.vue`
- **内容**：失物发布页面、管理员发布的失物管理
- **功能**：管理员专用功能

### 阶段五：路由和导航

#### 任务 13：配置路由系统
- **文件**：`src/router/index.js`
- **内容**：路由配置、权限守卫、角色控制
- **功能**：页面路由和权限控制

#### 任务 14：实现导航组件
- **文件**：
  - `src/components/common/NavBar.vue`
  - `src/components/common/SideBar.vue`
- **内容**：顶部导航栏、侧边栏
- **功能**：应用导航界面

### 阶段六：样式和优化

#### 任务 15：完善样式系统
- **文件**：`src/styles/global.css`, `src/styles/variables.css`
- **内容**：全局样式、CSS变量定义
- **功能**：统一的视觉风格

#### 任务 16：错误处理和优化
- **文件**：`src/utils/error.js`, `src/components/common/ErrorBoundary.vue`
- **内容**：错误处理机制、错误边界组件
- **功能**：提升用户体验

## 接口映射

### 用户相关接口
- `POST /api/user/login` → `src/api/user.js#login`
- `GET /api/user/profile/{id}` → `src/api/user.js#getUserProfile`
- `PUT /api/user/profile` → `src/api/user.js#updateUserProfile`

### 管理员相关接口
- `POST /api/admin/lost-item/login` → `src/api/admin.js#lostItemAdminLogin`
- `POST /api/admin/super/login` → `src/api/admin.js#superAdminLogin`
- `GET /api/admin/lost-item/profile/{id}` → `src/api/admin.js#getAdminProfile`

### 失物相关接口
- `GET /api/lost-items/all` → `src/api/lostItem.js#getAllLostItems`
- `GET /api/lost-items/search` → `src/api/lostItem.js#searchLostItems`
- `GET /api/lost-items/{id}` → `src/api/lostItem.js#getLostItem`
- `POST /api/lost-items/publish` → `src/api/lostItem.js#publishLostItem`
- `POST /api/lost-items/claim` → `src/api/lostItem.js#claimLostItem`
- `DELETE /api/lost-items/{id}` → `src/api/lostItem.js#deleteLostItem`
- `GET /api/lost-items/admin/{adminId}` → `src/api/lostItem.js#getLostItemsByAdmin`

## 开发规范

1. **代码风格**：使用 ESLint + Prettier 保证代码风格一致
2. **组件命名**：使用 PascalCase，文件名使用 kebab-case
3. **API命名**：使用驼峰命名法，与后端接口保持一致
4. **状态管理**：使用 Pinia 的 Composition API 风格
5. **类型安全**：虽然使用 JavaScript，但要保证数据结构的一致性

## 后续扩展考虑

1. **国际化支持**：预留 i18n 集成空间
2. **主题切换**：CSS 变量支持多主题
3. **移动端适配**：响应式设计
4. **性能优化**：懒加载、虚拟滚动等
5. **测试覆盖**：单元测试、集成测试

---

**注意**：本计划按照高内聚低耦合的原则设计，当后端接口发生变更时，前端只需要修改对应的 API 文件，不会影响到组件和页面逻辑。每个开发任务都有明确的文件范围和功能描述，便于团队协作和进度跟踪。