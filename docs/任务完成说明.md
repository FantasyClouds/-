✅ 任务1完成：搭建API层基础结构

已成功创建 src/api/index.js 文件，实现了以下功能：

核心配置

- 配置 Axios 实例，设置基础URL为 http://localhost:8080
- 设置请求超时时间为10秒
- 默认请求头设置为 application/json
  请求拦截器

- 自动从 localStorage 获取 token 并添加到请求头
- 开发环境下打印详细的请求信息
- 统一的请求错误处理
  响应拦截器

- 开发环境下打印响应信息
- 统一处理后端返回的数据格式（基于code字段判断成功/失败）
- 完善的HTTP状态码错误处理（400、401、403、404、500等）
- 401错误时自动清除本地认证信息
- 网络错误的友好提示
  便捷方法

- 导出常用的 get 、 post 、 put 、 del 方法
- 提供专门的 upload 方法处理文件上传
  设计优势

- 高内聚：所有HTTP请求配置集中管理
- 低耦合：其他模块只需导入使用，无需关心底层实现
- 易维护：后端接口变更时只需修改此文件
- 统一错误处理：提供一致的用户体验

任务2（定义系统常量）已完成

成功创建了系统常量文件结构：

创建的文件：

- `enums.js` - 枚举值定义
- `api.js` - API相关常量
- `index.js` - 统一导出和应用配置
  实现的功能：

1. 1. 枚举值定义 ：
   - 物品类型（书、包、卡、钥匙等10种类型）
   - 颜色分类（红色、绿色、蓝色等18种颜色）
   - 用户角色（普通用户、失物管理员、总管理员）
   - 失物状态（未领取、已领取）
   - 提供了名称映射和选项列表生成函数

2. 2. API常量配置 ：
   - 完整的API路径定义（用户、管理员、失物相关接口）
   - HTTP方法和请求头常量
   - 响应状态码和错误消息映射
   - 文件上传配置和验证函数
   - 工具函数（URL构建、查询参数、错误处理）

3. 3. 应用配置常量 ：
   - 路由路径和名称映射
   - 表单验证规则
   - 消息提示配置
   - 日期时间格式
   - 实用工具函数

✅ 任务3：创建工具函数 已成功完成

## 创建的文件

### 1. request.js

- 功能 ：高级请求工具类，基于已有的API层提供更丰富的请求功能
- 主要特性 ：
  - 封装GET、POST、PUT、DELETE、上传等请求方法
  - 统一的响应处理和错误处理机制
  - 支持批量请求和请求重试
  - 自动错误分类和友好提示
  - 上传进度回调支持

### 2. auth.js

- 功能 ：认证和权限管理工具类
- 主要特性 ：
  - Token的存储、获取、验证和自动刷新
  - 用户信息的管理和持久化
  - 角色权限检查（普通用户、失物管理员、总管理员）
  - 路由权限验证
  - 登录状态管理和重定向路径获取

### 3. format.js

- 功能 ：数据格式化工具类
- 主要特性 ：
  - 日期时间格式化（绝对时间和相对时间）
  - 文件大小、数字、百分比格式化
  - 业务数据格式化（物品类型、颜色、状态、用户角色）
  - 手机号、身份证等敏感信息脱敏
  - 文本截断、关键词高亮
  - URL参数处理和JSON安全解析

## 设计特点

1. 1. 模块化设计 ：每个工具类职责单一，便于维护和测试
2. 2. 统一接口 ：提供类方法和便捷函数两种调用方式
3. 3. 错误处理 ：完善的异常捕获和降级处理
4. 4. 类型安全 ：参数验证和默认值处理
5. 5. 业务集成 ：与已创建的常量定义和API层紧密配合
      这些工具函数为后续的状态管理、组件开发和页面实现提供了坚实的基础支撑。可以继续进行 任务4：实现用户认证API 。

任务4：实现用户认证API - 已完成

成功创建了用户认证相关的API接口文件：

### 创建的文件

1. 1. `user.js` - 普通用户API接口
   - 实现了用户登录接口 login()
   - 实现了获取用户信息接口 getUserProfile()
   - 实现了更新用户信息接口 updateUserProfile()
   - 提供了登录状态检查、获取当前用户、登出等工具方法
   - 导出了便捷方法供其他模块使用

2. 2. `admin.js` - 管理员API接口
   - 实现了失物管理员登录接口 lostItemAdminLogin()
   - 实现了总管理员登录接口 superAdminLogin()
   - 实现了获取管理员信息接口 getLostItemAdminProfile()
   - 提供了角色检查、权限验证、登出等管理功能
   - 支持根据角色类型进行统一登录的 loginByRole() 方法

3. 3. 更新了 `api.js`
   - 添加了 API_ENDPOINTS 常量，提供统一的API端点定义
   - 保持了与现有 API_PATHS 的兼容性

### 实现的功能

- 三种角色登录支持 ：普通用户、失物管理员、总管理员
- 用户信息管理 ：获取和更新用户/管理员信息
- 状态管理 ：登录状态检查、角色权限验证
- 本地存储 ：自动保存登录信息和角色数据
- 错误处理 ：完善的异常捕获和错误日志
- 类型安全 ：详细的JSDoc注释和参数说明

### 设计特点

- 模块化设计 ：用户和管理员API分离，职责清晰
- 统一接口 ：基于现有的request工具和API常量
- 便捷导出 ：提供类方法和便捷函数两种使用方式
- 角色区分 ：支持多种管理员角色的权限控制
  所有接口都基于后端API文档实现，确保前后端数据结构一致性。

任务5：实现认证状态管理 已成功完成！

## 完成内容

创建了 `auth.js` 认证状态管理文件，实现了以下功能：

### 核心功能

- 统一认证状态管理 ：整合普通用户和管理员的认证状态
- Token管理 ：自动保存和恢复认证token
- 角色权限控制 ：支持三种用户角色的权限检查
- 本地存储同步 ：认证信息持久化存储

### 主要特性

1. 1. 多角色登录支持
   - 普通用户登录 ( loginAsUser )
   - 失物管理员登录 ( loginAsLostItemAdmin )
   - 总管理员登录 ( loginAsSuperAdmin )
   - 统一角色登录接口 ( loginByRole )

2. 2. 状态管理
   - 用户信息状态 ( currentUser )
   - 登录状态 ( isLoggedIn )
   - 用户角色 ( userRole )
   - 认证token ( token )
   - 加载状态 ( loginLoading )

3. 3. 权限控制
   - 角色判断计算属性 ( isNormalUser , isLostItemAdmin , isSuperAdmin , isAdmin )
   - 权限检查方法 ( hasPermission , canAccessAdmin , canAccessSuperAdmin )

4. 4. 数据持久化
   - 自动保存认证信息到localStorage
   - 应用启动时恢复登录状态 ( initAuth )
   - 兼容旧版本存储格式的迁移

5. 5. 便捷方法
   - 导出多个便捷函数供组件直接使用
   - 统一的错误处理和状态清理

### 设计特点

- 模块化设计 ：基于Pinia的Composition API风格
- 类型安全 ：完整的参数验证和错误处理
- 向后兼容 ：支持旧版本存储格式的自动迁移
- 统一接口 ：为不同角色提供一致的认证体验
